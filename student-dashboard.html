<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Student Dashboard — EduBot GTU</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header class="top">
    <a class="brand" href="index.html"><img src="assets/logo.png" alt="GTU"> EduBot GTU</a>
    <nav>
      <a href="material-viewer.html">Study Materials</a>
      <a href="ai-tools.html">AI Tools</a>
      <a href="contact.html">Contact</a>
    </nav>
  </header>

  <main class="container">
    <section class="hero card">
      <h1>Welcome — GTU Student Portal</h1>
      <p>Browse by Subject, Unit and quickly open PDF links & playlists.</p>
    </section>

    <section style="margin-top:16px">
      <h2>Popular Subjects</h2>
      <div id="subjectsGrid" style="display:flex;gap:12px;flex-wrap:wrap"></div>
    </section>
  </main>
  <!-- ================= FOOTER ================= -->  
  <footer class="site-footer">  
    <div class="footer-container">  
      <h3>EduBot GTU</h3>  
      <p class="tagline">Made for students, by students — Learn Smart. Study Fast. Score High.</p>  

      <div class="footer-links">  
        <a href="about.html">About</a>  
        <a href="privacy-policy.html">Privacy Policy</a>  
        <a href="terms.html">Terms</a>  
        <a href="contact.html">Contact</a>  
      </div>  

      <div class="social-icons">  
        <a href="https://instagram.com/" target="_blank"><img src="assets/icons/instagram.webp"></a>  
        <a href="https://github.com/" target="_blank"><img src="assets/icons/GitHub.png"></a>  
        <a href="https://linkedin.com/" target="_blank"><img src="assets/icons/linkedin.png"></a>  
      </div>  

      <p class="copy">© 2025 EduBot GTU — All rights reserved.</p>  
    </div>  
  </footer>  


  <script>
    // get materials from materials.json or Firestore (if configured)
    async function loadMaterials(){
      // try fetch static JSON first
      try {
        const res = await fetch('materials.json');
        if(res.ok){
          const list = await res.json();
          renderSubjects(list);
          return;
        }
      } catch(e){}
      // fallback: try from Firestore (not implemented here)
      renderSubjects([]);
    }

    function renderSubjects(list){
      const grid = document.getElementById('subjectsGrid');
      // group by subject
      const groups = {};
      list.forEach(m => {
        const s = m.subject || 'General';
        groups[s] = groups[s] || 0;
        groups[s]++;
      });
      if(Object.keys(groups).length===0){
        grid.innerHTML = '<div class="muted">No materials found. Ask admin to publish materials.json or upload to Firebase.</div>';
        return;
      }
      grid.innerHTML = '';
      Object.keys(groups).forEach(subject => {
        const el = document.createElement('a');
        el.className = 'card';
        el.href = 'material-viewer.html?subject=' + encodeURIComponent(subject);
        el.style.minWidth = '220px';
        el.innerHTML = `<strong>${subject}</strong><div class="muted">${groups[subject]} items</div>`;
        grid.appendChild(el);
      });
    }

    loadMaterials();
// Save material from Admin Dashboard
const form = document.getElementById("materialForm");

if (form) {
  form.addEventListener("submit", function (e) {
    e.preventDefault();

    const material = {
      title: document.getElementById("title").value,
      subject: document.getElementById("subject").value,
      description: document.getElementById("description").value,
      link: document.getElementById("link").value
    };

    let list = JSON.parse(localStorage.getItem("materials")) || [];
    list.push(material);

    localStorage.setItem("materials", JSON.stringify(list));
    alert("Material Added Successfully!");

    form.reset();
  });
}

// Display materials on Study Material page
const materialsList = document.getElementById("materialsList");

if (materialsList) {
  let list = JSON.parse(localStorage.getItem("materials")) || [];

  if (list.length === 0) {
    materialsList.innerHTML = "<p>No materials added yet.</p>";
  } else {
    list.forEach((item) => {
      materialsList.innerHTML += `
        <div style="border:1px solid #ccc; padding:10px; margin:10px;">
          <h3>${item.title}</h3>
          <p><strong>Subject:</strong> ${item.subject}</p>
          <p>${item.description}</p>
          <a href="${item.link}" target="_blank">Open Material</a>
        </div>
      `;
    });
  }
}
  </script>
</body>
</html>
